<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Healing Root Agro Ventures | Login</title>
<link rel="stylesheet" href="css/style.css">
</head>
<body>
<div class="container auth-container">
  <h1>Healing Root AGRO</h1>

  <div id="loginForm">
    <h2>Login</h2>
    <input type="email" id="loginEmail" placeholder="Email" />
    <input type="password" id="loginPassword" placeholder="Password" />
    <button id="loginBtn">Login</button>
    <p>Don't have an account? <span id="showSignup" class="link-btn">Sign Up</span></p>
  </div>

  <div id="signupForm" style="display:none;">
    <h2>Sign Up</h2>
    <input type="text" id="signupName" placeholder="Full Name" />
    <input type="email" id="signupEmail" placeholder="Email" />
    <input type="password" id="signupPassword" placeholder="Password" />
    <button id="signupBtn">Sign Up</button>
    <p>Already have an account? <span id="showLogin" class="link-btn">Login</span></p>
  </div>
</div>

<script type="module">
import { _healingRoot } from './js/app.js';

const loginBtn = document.getElementById('loginBtn');
const signupBtn = document.getElementById('signupBtn');
const showSignup = document.getElementById('showSignup');
const showLogin = document.getElementById('showLogin');
const loginForm = document.getElementById('loginForm');
const signupForm = document.getElementById('signupForm');

loginBtn.addEventListener('click', async () => {
  const email = document.getElementById('loginEmail').value.trim();
  const pass = document.getElementById('loginPassword').value.trim();
  if (!email || !pass) return alert('Fill all fields');
  try {
    await _healingRoot.doLogin(email, pass);
    window.location.href = 'feed.html';
  } catch(e) { alert(e.message); }
});

signupBtn.addEventListener('click', async () => {
  const name = document.getElementById('signupName').value.trim();
  const email = document.getElementById('signupEmail').value.trim();
  const pass = document.getElementById('signupPassword').value.trim();
  if (!name || !email || !pass) return alert('Fill all fields');
  try {
    await _healingRoot.doSignup(name,email,pass);
    window.location.href = 'feed.html';
  } catch(e) { alert(e.message); }
});

showSignup.addEventListener('click', () => { loginForm.style.display='none'; signupForm.style.display='block'; });
showLogin.addEventListener('click', () => { signupForm.style.display='none'; loginForm.style.display='block'; });
</script>
</body>
</html>
