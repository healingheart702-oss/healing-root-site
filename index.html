<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Healing Root Agro Ventures - Login</title>
<link rel="stylesheet" href="css/style.css">
</head>
<body>

<div class="auth-container">
  <h1>Welcome to Healing Root Agro Ventures</h1>
  
  <div class="auth-forms">
    <form id="signup-form">
      <h2>Sign Up</h2>
      <input type="text" id="signup-name" placeholder="Full Name" required>
      <input type="email" id="signup-email" placeholder="Email" required>
      <input type="password" id="signup-password" placeholder="Password" required>
      <button type="submit">Sign Up</button>
    </form>

    <form id="login-form">
      <h2>Login</h2>
      <input type="email" id="login-email" placeholder="Email" required>
      <input type="password" id="login-password" placeholder="Password" required>
      <button type="submit">Login</button>
    </form>
  </div>

  <p id="auth-message"></p>
</div>

<script type="module">
import { initializeApp } from "https://www.gstatic.com/firebasejs/10.3.0/firebase-app.js";
import { getAuth, createUserWithEmailAndPassword, signInWithEmailAndPassword } from "https://www.gstatic.com/firebasejs/10.3.0/firebase-auth.js";
import { firebaseConfig } from "./js/firebaseConfig.js";

const app = initializeApp(firebaseConfig);
const auth = getAuth(app);

function redirectToFeed() {
    window.location.href = "feed.html";
}

document.getElementById('signup-form').addEventListener('submit', e => {
    e.preventDefault();
    const name = document.getElementById('signup-name').value;
    const email = document.getElementById('signup-email').value;
    const password = document.getElementById('signup-password').value;

    createUserWithEmailAndPassword(auth, email, password)
        .then(userCredential => {
            // Save display name
            userCredential.user.updateProfile({ displayName: name });
            redirectToFeed();
        })
        .catch(error => { document.getElementById('auth-message').textContent = error.message; });
});

document.getElementById('login-form').addEventListener('submit', e => {
    e.preventDefault();
    const email = document.getElementById('login-email').value;
    const password = document.getElementById('login-password').value;

    signInWithEmailAndPassword(auth, email, password)
        .then(userCredential => { redirectToFeed(); })
        .catch(error => { document.getElementById('auth-message').textContent = error.message; });
});
</script>

</body>
</html>
